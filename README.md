# LaTeX Article CI/CD Template

## Introduction

This project provides a template repository for automatically compiling a LaTeX article with a bibliography using GitHub Actions. 
The purpose of this project is to demonstrate the benefits of automation in Continuous Integration and Delivery (CI/CD), ensuring that your LaTeX documents are consistently compiled with all references and citations correctly resolved. 
This setup enhances productivity and ensures high-quality document preparation.

## Setup Instructions

To set up this exercise, follow these steps:

1. **Use the Template Repository**:
   - Go to the LaTeX Article CI/CD Template Repository: [latex-article-template](https://github.com/matteodelucchi/latex-article-template).
   - Click on the "Use this template" button to create your own repository from this template.

2. **Clone Your Repository**:
   - Clone your repository to your local machine:
     ```bash
     git clone https://github.com/yourusername/your-repo-name.git
     cd your-repo-name
     ```

## Exercise Instructions

By completing the following tasks, you will gain practical experience in setting up and managing CI/CD workflows for LaTeX projects, enhancing your understanding of automation and its benefits.

1. **Make a Change in `main.tex`**:
   - Edit the `main.tex` file (on the `main` branch) to add or modify some content (e.g. add your name as author).
   - Commit and push your changes:
   - Check the CI/CD pipeline status on GitHub and get an overview of the pipeline execution:
  
     **Solution**: Go to the Actions tab.
     
        - How many workflows are triggered?  
        **Solution**: Only one workflow is triggered.
        - How many jobs are executed in each workflow?  
         **Solution**: Only one job is executed with four steps.
        - Which branch triggered the last pipeline run?  
         **Solution**: The main branch triggered the last pipeline run.
        - On which branch do the workflows run by default?  
         **Solution**: The workflows run by default on any branch and is triggered by any push event.
        - How long does the pipeline take to complete?  
         **Solution**: The pipeline takes around 7 minutes to complete.
        - What is an artifact?  
         **Solution**: An artifact is a file or collection of files produced by a workflow run. Artifacts are associated with a workflow run and can be used to persist data or pass data between jobs in the same workflow. In this exercise, the artifact is the PDF file generated by the LaTeX compilation process.

2. **Modify the Workflow to Run Only on the Main Branch**:
   - Edit the `.github/workflows/latexBuild.yml` file to ensure the workflow runs only on the `main` branch.
     
   **Solution:** Head to `.github/workflows` sub-folder and perform the following modifications in the `latexBuild.yml` file:
  ```bash
   on:
     push: 
       branches:
         - main
  ```
   - Push a change to a different branch and observe if the workflow is triggered. What do you observe?
   
   **Solution**: Under Actions, you will notice that there no new workflow is triggered when pushing to a different branch. For example, if you complete this exercise on a branch called `exercise-2`, pushing to that branch will not trigger the workflow.


3. **Use an Action to Speed Up the Compilation Process**:
   - Go to the [GitHub Marketplace](https://github.com/marketplace?type=actions) and search for an action that can compile LaTeX documents (hint: use `texlive` as a keyword).
   - Modify the workflow to use an action to speed up the LaTeX compilation process.

   **Solution**: In your `.github/workflows/latexBuild.yml` file, modify the original code under "steps" as follows:
  ```bash
    steps:
    - uses: actions/checkout@v4
    - name: Compile LaTeX document
      uses: dante-ev/latex-action@latest
      with:
        root_file: main.tex
  ```
   
   - Observe the pipeline run time before and after adding the action. What do you observe and why?
   
   **Solution**: The pipeline run time is significantly reduced after adding the action to speed up the LaTeX compilation process. This is because the action caches the TeX Live distribution, which reduces the setup time for the compilation process.

   _Note_: You will find the full [solutions script](https://github.com/matteodelucchi/latex-article-template-solutions/blob/84e57a14a99a20222369feccac4d476235ab0a71/.github/workflows/latexBuild.yml) in the original exercise solutions' repository.

4. **Add a Second Workflow Using the TeX Live Docker Image**:
   - Create a new workflow file `.github/workflows/latex-docker.yml` that uses the [TeX Live Docker image](https://hub.docker.com/r/texlive/texlive) to compile the document.
   - Ensure this workflow runs on every push to the `main` branch.
   - Observe the differences in the pipeline execution and environment setup. What do you observe?  
   
   **Solution**: The pipeline execution time is significantly reduced when using the TeX Live Docker image. The environment setup is also simplified as the necessary dependencies are already included in the Docker image.

## Bonus Exercise

5. **Modify the `latex-docker` Workflow to Print the Artifact Link in the Pull Request**:
   - Edit the `.github/workflows/latex-docker.yml` file to include a second job that prints the link to the PDF artifact in the pull request but runs only upon successful completion of the first job.
      - You can use the `actions/upload-artifact`, `jwalton/gh-find-current-pr` and `peter-evans/create-or-update-comment` actions to achieve this.
   - Create a pull request and observe the comments. What do you observe?

  _Note_: A [commented solutions script](https://github.com/matteodelucchi/latex-article-template-solutions/blob/84e57a14a99a20222369feccac4d476235ab0a71/.github/workflows/latex-docker.yml) for exercices 4-5 is available in the original solutions repository
  
